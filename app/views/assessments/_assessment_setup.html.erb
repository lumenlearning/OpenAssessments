<script id="srcData" type="text/x-data">
  <%= @src_data %>
</script>

<%= render(partial: 'assessments/edx_data', object: @edx_verticals) if @edx_verticals.present? -%>
<%= render(partial: 'assessments/edx_data', object: @edx_problems) if @edx_problems.present? -%>

<script type="text/javascript">
  window.DEFAULT_SETTINGS = {
    apiUrl: '<%= application_base_url %>',
    srcUrl: '<%= @src_url %>',
    style: '<%= @style %>',
    isLti: <%= @is_lti %>,
    assessmentId: '<%= @assessment_id %>',
    <% if @external_user_id %>
    externalUserId: '<%= @external_user_id  %>',
    <% end %>
    <% if @keywords %>
    keywords: '<%= @keywords %>',
    <% end %>
    resultsEndPoint: '<%= @results_end_point || "http://#{request.host_with_port}/api" %>',
    confidenceLevels: <%= @confidence_levels %>,
    enableStart: <%= @enable_start %>,
    <% if @eid %>
    eId: '<%= @eid %>',
    <% end %>
    offline: <%= @src_data.present? %>,
    lis_outcome_service_url: '<%= params[:lis_outcome_service_url] %>',
    <% if @kind %>
    kind: '<%= @kind %>',
    <% end %>
    <% if @assessment_settings %>
    allowed_attempts: '<%= @assessment_settings.allowed_attempts %>',
    <% end -%>
    <% if @user_attempts %>
    user_attempts: <%= @user_attempts %>,
    <% end -%>
    <% if @per_sec %>
    per_sec: '<%= @per_sec %>',
    <% end -%>
    lis_result_sourcedid: '<%= params[:lis_result_sourcedid] %>',
    lis_outcome_service_url: '<%= params[:lis_outcome_service_url] %>',
    lis_user_id: '<%=  params[:lis_user_id] || params[:user_id]%>',
    csrfToken: '<%= form_authenticity_token %>',
    jwt: '<%= jwt_token %>'
  };
</script>
